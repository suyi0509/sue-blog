## 闭包

### 定义
```js
// 闭包示例
function outerFunction() {  
  var outerVariable = 100; // 外部作用域的变量  
  
  function innerFunction() {  
    console.log(outerVariable); // 内部函数访问外部变量的示例  
  }  
  
  return innerFunction; // 返回内部函数作为闭包  
} 
```
- 定义
> - 闭包是指有权访问另一个函数作用域中的变量的函数。
> - 通常是定义在外层函数中的内层函数，对外层函数中的局部变量进行引用，使得在外部函数调用结束后，这些局部变量仍然能够被访问。

- 实践⻆度上闭包定义(在结合执行作用域链)
- 1. 即使创建它的上下文已经销毁,但是它依旧存在
    - (比如上文的 checkScope 已经销毁,但是我们依旧可以沿着作用域链找到)
- 2. 在代码中引用了自由变量


### 思考
```js
var data = []

for(var i = 0; i< 3; i++){
    data[i] = function () {
        console.log(i);
    };
}

data[0]();
data[1]();
data[2]();
```
- 答案全是3,分析一下原因

1.在data[0]函数之前, 这时的全局上下文的VO为
```js
globalContext = {
    VO:{
        data:[...]
        i:3
    }
}
```
2.当执行data[0]函数时,data[0]函数的作用域链[[scope]]
```js
data[0]Context = {
    Scope:[AO, globalContext.VO]
}
// data[0]Context 沿着作用域链查找,AO上无i, 则会在globalContext上查找,所以输出 3
```


